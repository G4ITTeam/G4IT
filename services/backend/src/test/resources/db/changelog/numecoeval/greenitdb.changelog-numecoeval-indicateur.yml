databaseChangeLog:
  - changeSet:
      id: create-indicator-pe-table
      author: G4IT Dev Team
      preConditions:
        - onFail: CONTINUE
        - not:
            - tableExists:
                tableName: ind_indicateur_impact_equipement_physique
      changes:
        - createTable:
            tableName: ind_indicateur_impact_equipement_physique
            columns:
              - column:
                  name: date_calcul
                  type: timestamp
              - column:
                  name: date_lot
                  type: date
              - column:
                  name: etapeacv
                  type: varchar(255)
              - column:
                  name: critere
                  type: varchar(255)
              - column:
                  name: source
                  type: varchar(255)
              - column:
                  name: statut_indicateur
                  type: varchar(255)
              - column:
                  name: trace
                  type: text
              - column:
                  name: version_calcul
                  type: varchar(255)
              - column:
                  name: conso_elec_moyenne
                  type: float
              - column:
                  name: impact_unitaire
                  type: float
              - column:
                  name: quantite
                  type: integer
              - column:
                  name: statut_equipement_physique
                  type: varchar(255)
              - column:
                  name: type_equipement
                  type: varchar(255)
              - column:
                  name: unite
                  type: varchar(255)
              - column:
                  name: nom_entite
                  type: varchar(255)
              - column:
                  name: nom_organisation
                  type: varchar(255)
              - column:
                  name: nom_equipement
                  type: varchar(255)
              - column:
                  name: nom_lot
                  type: varchar(255)
              - column:
                  name: nom_source_donnee
                  type: varchar(255)
              - column:
                  name: date_lot_discriminator
                  type: date
              - column:
                  name: nom_organisation_discriminator
                  type: varchar(255)
              - column:
                  name: nom_entite_discriminator
                  type: varchar(255)
              - column:
                  name: nom_source_donnee_discriminator
                  type: varchar(255)

  - changeSet:
      id: create-virtual-equipement-indicator-table
      author: G4IT Dev Team
      preConditions:
        - onFail: CONTINUE
        - not:
            - tableExists:
                tableName: ind_indicateur_impact_equipement_virtuel
      changes:
        - createTable:
            tableName: ind_indicateur_impact_equipement_virtuel
            columns:
              - column:
                  name: date_calcul
                  type: timestamp
              - column:
                  name: date_lot
                  type: date
              - column:
                  name: nom_lot
                  type: varchar(255)
              - column:
                  name: etapeacv
                  type: varchar(255)
              - column:
                  name: critere
                  type: varchar(255)
              - column:
                  name: nom_organisation
                  type: varchar(255)
              - column:
                  name: nom_source_donnee
                  type: varchar(255)
              - column:
                  name: nom_equipement
                  type: varchar(255)
              - column:
                  name: nom_equipement_virtuel
                  type: varchar(255)
              - column:
                  name: nom_entite
                  type: varchar(255)
              - column:
                  name: source
                  type: varchar(255)
              - column:
                  name: statut_indicateur
                  type: varchar(255)
              - column:
                  name: trace
                  type: text
              - column:
                  name: version_calcul
                  type: varchar(255)
              - column:
                  name: impact_unitaire
                  type: float
              - column:
                  name: unite
                  type: varchar(255)
              - column:
                  name: conso_elec_moyenne
                  type: float
              - column:
                  name: cluster
                  type: varchar(255)
              - column:
                  name: date_lot_discriminator
                  type: date
              - column:
                  name: nom_organisation_discriminator
                  type: varchar(255)
              - column:
                  name: nom_entite_discriminator
                  type: varchar(255)
              - column:
                  name: nom_source_donnee_discriminator
                  type: varchar(255)

  - changeSet:
      id: create-indicator-ir-table
      author: G4IT Dev Team
      preConditions:
        - onFail: CONTINUE
        - not:
            - tableExists:
                tableName: ind_indicateur_impact_reseau
      changes:
        - createTable:
            tableName: ind_indicateur_impact_reseau
            columns:
              - column:
                  name: date_calcul
                  type: timestamp
              - column:
                  name: date_lot
                  type: date
              - column:
                  name: nom_lot
                  type: varchar(255)
              - column:
                  name: etapeacv
                  type: varchar(255)
              - column:
                  name: critere
                  type: varchar(255)
              - column:
                  name: source
                  type: varchar(255)
              - column:
                  name: statut_indicateur
                  type: varchar(255)
              - column:
                  name: trace
                  type: text
              - column:
                  name: version_calcul
                  type: varchar(255)
              - column:
                  name: impact_unitaire
                  type: float
              - column:
                  name: unite
                  type: varchar(255)
              - column:
                  name: nom_entite
                  type: varchar(255)
              - column:
                  name: nom_organisation
                  type: varchar(255)
              - column:
                  name: nom_source_donnee
                  type: varchar(255)
              - column:
                  name: nom_equipement
                  type: varchar(255)
              - column:
                  name: date_lot_discriminator
                  type: date
              - column:
                  name: nom_organisation_discriminator
                  type: varchar(255)
              - column:
                  name: nom_entite_discriminator
                  type: varchar(255)
              - column:
                  name: nom_source_donnee_discriminator
                  type: varchar(255)

  - changeSet:
      id: create-indicator-a-table
      author: G4IT Dev Team
      preConditions:
        - onFail: CONTINUE
        - not:
            - tableExists:
                tableName: ind_indicateur_impact_application
      changes:
        - createTable:
            tableName: ind_indicateur_impact_application
            columns:
              - column:
                  name: date_calcul
                  type: timestamp
              - column:
                  name: date_lot
                  type: date
              - column:
                  name: nom_lot
                  type: varchar(255)
              - column:
                  name: etapeacv
                  type: varchar(255)
              - column:
                  name: critere
                  type: varchar(255)
              - column:
                  name: nom_organisation
                  type: varchar(255)
              - column:
                  name: nom_source_donnee
                  type: varchar(255)
              - column:
                  name: nom_application
                  type: varchar(255)
              - column:
                  name: type_environnement
                  type: varchar(255)
              - column:
                  name: nom_equipement_physique
                  type: varchar(255)
              - column:
                  name: nom_equipement_virtuel
                  type: varchar(255)
              - column:
                  name: nom_entite
                  type: varchar(255)
              - column:
                  name: source
                  type: varchar(255)
              - column:
                  name: statut_indicateur
                  type: varchar(255)
              - column:
                  name: trace
                  type: text
              - column:
                  name: version_calcul
                  type: varchar(255)
              - column:
                  name: domaine
                  type: varchar(255)
              - column:
                  name: sous_domaine
                  type: varchar(255)
              - column:
                  name: impact_unitaire
                  type: float
              - column:
                  name: unite
                  type: varchar(255)
              - column:
                  name: conso_elec_moyenne
                  type: float
              - column:
                  name: date_lot_discriminator
                  type: date
              - column:
                  name: nom_organisation_discriminator
                  type: varchar(255)
              - column:
                  name: nom_entite_discriminator
                  type: varchar(255)
              - column:
                  name: nom_source_donnee_discriminator
                  type: varchar(255)

  - changeSet:
      id: create-indicator-m-table
      author: G4IT Dev Team
      preConditions:
        - onFail: CONTINUE
        - not:
            - tableExists:
                tableName: ind_indicateur_impact_messagerie
      changes:
        - createTable:
            tableName: ind_indicateur_impact_messagerie
            columns:
              - column:
                  name: date_calcul
                  type: timestamp
              - column:
                  name: date_lot
                  type: date
              - column:
                  name: nom_lot
                  type: varchar(255)
              - column:
                  name: nom_organisation
                  type: varchar(255)
              - column:
                  name: nom_source_donnee
                  type: varchar(255)
              - column:
                  name: critere
                  type: varchar(255)
              - column:
                  name: mois_annee
                  type: date
              - column:
                  name: nom_entite
                  type: varchar(255)
              - column:
                  name: source
                  type: varchar(255)
              - column:
                  name: statut_indicateur
                  type: varchar(255)
              - column:
                  name: trace
                  type: text
              - column:
                  name: version_calcul
                  type: varchar(255)
              - column:
                  name: impact_unitaire
                  type: float
              - column:
                  name: unite
                  type: varchar(255)
              - column:
                  name: nombre_mail_emis
                  type: float
              - column:
                  name: volume_total_mail_emis
                  type: float
              - column:
                  name: date_lot_discriminator
                  type: date
              - column:
                  name: nom_organisation_discriminator
                  type: varchar(255)
              - column:
                  name: nom_entite_discriminator
                  type: varchar(255)
              - column:
                  name: nom_source_donnee_discriminator
                  type: varchar(255)
